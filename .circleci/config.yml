version: 2.1
parameters:
  # run_job_build:
  #   type: boolean
  #   default: false
  var1:
    type: string
    default: ''
  var2:
    type: string
    default: ''
  var3:
    type: string
    default: ''
  var4:
    type: string
    default: ''
workflows:
  version: 2
  ci:
    when: << pipeline.parameters.var1 >>
    jobs:
    - build
        # requires:
        # - build
jobs:
  build:
    machine:
      image: ubuntu-1604:201903-01
      docker_layer_caching: false
    environment:
      var1: << pipeline.parameters.var1 >>
      var2: << pipeline.parameters.var2 >>
      var3: << pipeline.parameters.var4 >>
      var4: << pipeline.parameters.var4 >>
    steps:
      - checkout
      - run:
          name: system info
          command: |
            echo hello
            echo world
            echo goodbye
      - run:
          name: Print environment variables
          command: |
            printenv

      # - run:
      #     name: Fail the job
      #     command: |
      #       false

      - run:
          when: always
          name: Store CIRCLE_BUILD_NUM
          command: |
            true
